<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Life Designer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Life Designer, design by oneself!">
<meta property="og:type" content="website">
<meta property="og:title" content="Life Designer">
<meta property="og:url" content="http://yespon.github.io/index.html">
<meta property="og:site_name" content="Life Designer">
<meta property="og:description" content="Life Designer, design by oneself!">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Life Designer">
<meta name="twitter:description" content="Life Designer, design by oneself!">
  
    <link rel="alternate" href="/atom.xml" title="Life Designer" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yespon.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/">Categories</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Life Designer</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Life Designer, design by oneself!</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-pandas-read-csv参数详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/29/pandas-read-csv参数详解/" class="article-date">
  <time datetime="2017-11-29T12:16:20.000Z" itemprop="datePublished">2017-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/29/pandas-read-csv参数详解/">pandas.read_csv参数详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>引子：pandas 的 read_csv 是数据集（文本）读取的一个常用函数，介于参数太多，且每次查阅官方 document 耗时，今天就索性将其整理，于人于己方便。</p>
<h1 id="pandas-read-csv参数整理"><a href="#pandas-read-csv参数整理" class="headerlink" title="pandas.read_csv参数整理"></a>pandas.read_csv参数整理</h1><p>  pandas.read_csv 读取CSV（逗号分割）文件到DataFrame<br>也支持文件的部分导入和选择迭代<br>更多帮助参见：<a href="http://pandas.pydata.org/pandas-docs/stable/io.html" target="_blank" rel="external">http://pandas.pydata.org/pandas-docs/stable/io.html</a></p>
<p><strong>参数：</strong></p>
<ul>
<li>filepath_or_buffer : str，pathlib。str, pathlib.Path, py._path.local.LocalPath or any object with a read() method (such as a file handle or StringIO)</li>
</ul>
<p>可以是URL，可用URL类型包括：http, ftp, s3和文件。对于多文件正在准备中<br>本地文件读取实例：://localhost/path/to/table.csv</p>
<ul>
<li>sep : str, default ‘,’</li>
</ul>
<p>指定分隔符。如果不指定参数，则会尝试使用逗号分隔。分隔符长于一个字符并且不是‘\s+’,将使用python的语法分析器。并且忽略数据中的逗号。正则表达式例子：’\r\t’</p>
<ul>
<li>delimiter : str, default None</li>
</ul>
<p>定界符，备选分隔符（如果指定该参数，则sep参数失效）</p>
<ul>
<li>delim_whitespace : boolean, default False.</li>
</ul>
<p>指定空格(例如’ ‘或者’ ‘)是否作为分隔符使用，等效于设定sep=’\s+’。如果这个参数设定为Ture那么delimiter 参数失效。<br>在新版本0.18.1支持</p>
<ul>
<li>header : int or list of ints, default ‘infer’</li>
</ul>
<p>指定行数用来作为列名，数据开始行数。如果文件中没有列名，则默认为0，否则设置为None。如果明确设定header=0 就会替换掉原来存在列名。header参数可以是一个list例如：[0,1,3]，这个list表示将文件中的这些行作为列标题（意味着每一列有多个标题），介于中间的行将被忽略掉（例如本例中的2；本例中的数据1,2,4行将被作为多级标题出现，第3行数据将被丢弃，dataframe的数据从第5行开始。）。<br>注意：如果skip_blank_lines=True 那么header参数忽略注释行和空行，所以header=0表示第一行数据而不是文件的第一行。</p>
<ul>
<li>names : array-like, default None</li>
</ul>
<p>用于结果的列名列表，如果数据文件中没有列标题行，就需要执行header=None。默认列表中不能出现重复，除非设定参数mangle_dupe_cols=True。</p>
<ul>
<li>index_col : int or sequence or False, default None</li>
</ul>
<p>用作行索引的列编号或者列名，如果给定一个序列则有多个行索引。<br>如果文件不规则，行尾有分隔符，则可以设定index_col=False 来是的pandas不适用第一列作为行索引。</p>
<ul>
<li>usecols : array-like, default None</li>
</ul>
<p>返回一个数据子集，该列表中的值必须可以对应到文件中的位置（数字可以对应到指定的列）或者是字符传为文件中的列名。例如：usecols有效参数可能是 [0,1,2]或者是 [‘foo’, ‘bar’, ‘baz’]。使用这个参数可以加快加载速度并降低内存消耗。</p>
<ul>
<li>as_recarray : boolean, default False</li>
</ul>
<p>不赞成使用：该参数会在未来版本移除。请使用pd.read_csv(…).to_records()替代。<br>返回一个Numpy的recarray来替代DataFrame。如果该参数设定为True。将会优先squeeze参数使用。并且行索引将不再可用，索引列也将被忽略。</p>
<ul>
<li>squeeze : boolean, default False</li>
</ul>
<p>如果文件值包含一列，则返回一个Series</p>
<ul>
<li>prefix : str, default None</li>
</ul>
<p>在没有列标题时，给列添加前缀。例如：添加‘X’ 成为 X0, X1, …</p>
<ul>
<li>mangle_dupe_cols : boolean, default True</li>
</ul>
<p>重复的列，将‘X’…’X’表示为‘X.0’…’X.N’。如果设定为false则会将所有重名列覆盖。</p>
<ul>
<li>dtype : Type name or dict of column -&gt; type, default None</li>
</ul>
<p>每列数据的数据类型。例如 {‘a’: np.float64, ‘b’: np.int32}</p>
<ul>
<li>engine : {‘c’, ‘python’}, optional</li>
</ul>
<p>Parser engine to use. The C engine is faster while the python engine is currently more feature-complete.<br>使用的分析引擎。可以选择C或者是python。C引擎快但是Python引擎功能更加完备。</p>
<ul>
<li>converters : dict, default None</li>
</ul>
<p>列转换函数的字典。key可以是列名或者列的序号。</p>
<ul>
<li>true_values : list, default None</li>
</ul>
<p>Values to consider as True</p>
<ul>
<li>false_values : list, default None</li>
</ul>
<p>Values to consider as False</p>
<ul>
<li>skipinitialspace : boolean, default False</li>
</ul>
<p>忽略分隔符后的空白（默认为False，即不忽略）.</p>
<ul>
<li>skiprows : list-like or integer, default None</li>
</ul>
<p>需要忽略的行数（从文件开始处算起），或需要跳过的行号列表（从0开始）。</p>
<ul>
<li>skipfooter : int, default 0</li>
</ul>
<p>从文件尾部开始忽略。 (c引擎不支持)</p>
<ul>
<li>skip_footer : int, default 0</li>
</ul>
<p>不推荐使用：建议使用skipfooter ，功能一样。</p>
<ul>
<li>nrows : int, default None</li>
</ul>
<p>需要读取的行数（从文件头开始算起）。</p>
<ul>
<li>na_values : scalar, str, list-like, or dict, default None</li>
</ul>
<p>一组用于替换NA/NaN的值。如果传参，需要制定特定列的空值。默认为‘1.#IND’, ‘1.#QNAN’, ‘N/A’, ‘NA’, ‘NULL’, ‘NaN’, ‘nan’`.</p>
<ul>
<li>keep_default_na : bool, default True</li>
</ul>
<p>如果指定na_values参数，并且keep_default_na=False，那么默认的NaN将被覆盖，否则添加。</p>
<ul>
<li>na_filter : boolean, default True</li>
</ul>
<p>是否检查丢失值（空字符串或者是空值）。对于大文件来说数据集中没有空值，设定na_filter=False可以提升读取速度。</p>
<ul>
<li>verbose : boolean, default False</li>
</ul>
<p>是否打印各种解析器的输出信息，例如：“非数值列中缺失值的数量”等。</p>
<ul>
<li>skip_blank_lines : boolean, default True</li>
</ul>
<p>如果为True，则跳过空行；否则记为NaN。</p>
<ul>
<li><p>parse_dates : boolean or list of ints or names or list of lists or dict, default False</p>
</li>
<li><p>boolean. True -&gt; 解析索引</p>
</li>
</ul>
<p>list of ints or names. e.g. If [1, 2, 3] -&gt; 解析1,2,3列的值作为独立的日期列；<br>list of lists. e.g. If [[1, 3]] -&gt; 合并1,3列作为一个日期列使用<br>dict, e.g. {‘foo’ : [1, 3]} -&gt; 将1,3列合并，并给合并后的列起名为”foo”</p>
<ul>
<li>infer_datetime_format : boolean, default False</li>
</ul>
<p>如果设定为True并且parse_dates 可用，那么pandas将尝试转换为日期类型，如果可以转换，转换方法并解析。在某些情况下会快5~10倍。</p>
<ul>
<li>keep_date_col : boolean, default False</li>
</ul>
<p>如果连接多列解析日期，则保持参与连接的列。默认为False。</p>
<ul>
<li>date_parser : function, default None</li>
</ul>
<p>用于解析日期的函数，默认使用dateutil.parser.parser来做转换。Pandas尝试使用三种不同的方式解析，如果遇到问题则使用下一种方式。<br>  1.使用一个或者多个arrays（由parse_dates指定）作为参数；<br>  2.连接指定多列字符串作为一个列作为参数；<br>  3.每行调用一次date_parser函数来解析一个或者多个字符串（由parse_dates指定）作为参数。</p>
<ul>
<li>dayfirst : boolean, default False</li>
</ul>
<p>DD/MM格式的日期类型</p>
<ul>
<li>iterator : boolean, default False</li>
</ul>
<p>返回一个TextFileReader 对象，以便逐块处理文件。</p>
<ul>
<li>chunksize : int, default None</li>
</ul>
<p>文件块的大小， See IO Tools docs for more informationon iterator and chunksize.</p>
<ul>
<li>compression : {‘infer’, ‘gzip’, ‘bz2’, ‘zip’, ‘xz’, None}, default ‘infer’</li>
</ul>
<p>直接使用磁盘上的压缩文件。如果使用infer参数，则使用 gzip, bz2, zip或者解压文件名中以‘.gz’, ‘.bz2’, ‘.zip’, or ‘xz’这些为后缀的文件，否则不解压。如果使用zip，那么ZIP包中国必须只包含一个文件。设置为None则不解压。<br>新版本0.18.1版本支持zip和xz解压</p>
<ul>
<li>thousands : str, default None</li>
</ul>
<p>千分位分割符，如“，”或者“.”</p>
<ul>
<li>decimal : str, default ‘.’</li>
</ul>
<p>字符中的小数点 (例如：欧洲数据使用’，‘).</p>
<ul>
<li>float_precision : string, default None</li>
</ul>
<p>Specifies which converter the C engine should use for floating-point values. The options are None for the ordinary converter, high for the high-precision converter, and round_trip for the round-trip converter.<br>指定</p>
<ul>
<li>lineterminator : str (length 1), default None</li>
</ul>
<p>行分割符，只在C解析器下使用。</p>
<ul>
<li>quotechar : str (length 1), optional</li>
</ul>
<p>引号，用作标识开始和解释的字符，引号内的分割符将被忽略。</p>
<ul>
<li>quoting : int or csv.QUOTE_* instance, default 0</li>
</ul>
<p>控制csv中的引号常量。可选 QUOTE_MINIMAL (0), QUOTE_ALL (1), QUOTE_NONNUMERIC (2) or QUOTE_NONE (3)</p>
<ul>
<li>doublequote : boolean, default True</li>
</ul>
<p>双引号，当单引号已经被定义，并且quoting 参数不是QUOTE_NONE的时候，使用双引号表示引号内的元素作为一个元素使用。</p>
<ul>
<li>escapechar : str (length 1), default None</li>
</ul>
<p>当quoting 为QUOTE_NONE时，指定一个字符使的不受分隔符限值。</p>
<ul>
<li>comment : str, default None</li>
</ul>
<p>标识着多余的行不被解析。如果该字符出现在行首，这一行将被全部忽略。这个参数只能是一个字符，空行（就像skip_blank_lines=True）注释行被header和skiprows忽略一样。例如如果指定comment=’#’ 解析‘#empty\na,b,c\n1,2,3’ 以header=0 那么返回结果将是以’a,b,c’作为header。</p>
<ul>
<li>encoding : str, default None</li>
</ul>
<p>指定字符集类型，通常指定为’utf-8’. List of Python standard encodings</p>
<ul>
<li>dialect : str or csv.Dialect instance, default None</li>
</ul>
<p>如果没有指定特定的语言，如果sep大于一个字符则忽略。具体查看csv.Dialect 文档</p>
<ul>
<li>tupleize_cols : boolean, default False</li>
</ul>
<p>Leave a list of tuples on columns as is (default is to convert to a Multi Index on the columns)</p>
<ul>
<li>error_bad_lines : boolean, default True</li>
</ul>
<p>如果一行包含太多的列，那么默认不会返回DataFrame ，如果设置成false，那么会将改行剔除（只能在C解析器下使用）。</p>
<ul>
<li>warn_bad_lines : boolean, default True</li>
</ul>
<p>如果error_bad_lines =False，并且warn_bad_lines =True 那么所有的“bad lines”将会被输出（只能在C解析器下使用）。</p>
<ul>
<li>low_memory : boolean, default True</li>
</ul>
<p>分块加载到内存，再低内存消耗中解析。但是可能出现类型混淆。确保类型不被混淆需要设置为False。或者使用dtype 参数指定类型。注意使用chunksize 或者iterator 参数分块读入会将整个文件读入到一个Dataframe，而忽略类型（只能在C解析器中有效）</p>
<ul>
<li>buffer_lines : int, default None</li>
</ul>
<p>不推荐使用，这个参数将会在未来版本移除，因为他的值在解析器中不推荐使用</p>
<ul>
<li>compact_ints : boolean, default False</li>
</ul>
<p>不推荐使用，这个参数将会在未来版本移除<br>如果设置compact_ints=True ，那么任何有整数类型构成的列将被按照最小的整数类型存储，是否有符号将取决于use_unsigned 参数</p>
<ul>
<li>use_unsigned : boolean, default False</li>
</ul>
<p>不推荐使用：这个参数将会在未来版本移除<br>如果整数列被压缩(i.e. compact_ints=True)，指定被压缩的列是有符号还是无符号的。</p>
<ul>
<li>memory_map : boolean, default False</li>
</ul>
<p>如果使用的文件在内存内，那么直接map文件使用。使用这种方式可以避免文件再次进行IO操作。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/29/pandas-read-csv参数详解/" data-id="cjanl0a7g00104owg022raeo9" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pandas-read-csv/">pandas read_csv</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-NVIDIA-GPU-运算能力列表" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/29/NVIDIA-GPU-运算能力列表/" class="article-date">
  <time datetime="2017-11-29T07:29:03.000Z" itemprop="datePublished">2017-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/29/NVIDIA-GPU-运算能力列表/">NVIDIA GPU 运算能力列表</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="CUDA-GPUs"><a href="#CUDA-GPUs" class="headerlink" title="CUDA GPUs"></a>CUDA GPUs</h1><p>FROM： <a href="https://developer.nvidia.com/cuda-gpus" target="_blank" rel="external">https://developer.nvidia.com/cuda-gpus</a></p>
<p>NVIDIA GPUs power millions of desktops, notebooks, workstations and supercomputers around the world, accelerating computationally-intensive tasks for consumers, professionals, scientists, and researchers.</p>
<p>Find out all about CUDA and GPU Computing by attending our GPU Computing Webinars and joining our free-to-joinCUDA Registered developer Program.</p>
<p>Learn about Tesla for technical and scientific computing<br>Learn about Quadro for professional visualization<br>If you have an older NVIDIA GPU you may find it listed on our legacy CUDA GPUs page<br>Click the sections below to expand</p>
<hr>
<h2 id="CUDA-Enabled-Tesla-Products"><a href="#CUDA-Enabled-Tesla-Products" class="headerlink" title="CUDA-Enabled Tesla Products"></a>CUDA-Enabled Tesla Products</h2><p>Tesla Workstation Products<br>GPU    Compute Capability<br>Tesla K80    3.7<br>Tesla K40    3.5<br>Tesla K20    3.5<br>Tesla C2075    2.0<br>Tesla C2050/C2070    2.0<br>//////////////////////////////////////////////////////////////////<br>Tesla Data Center Products<br>GPU    Compute Capability<br>Tesla P100    6.0<br>Tesla P40    6.1<br>Tesla P4    6.1<br>Tesla M40    5.2<br>Tesla M40    5.2<br>Tesla K80    3.7<br>Tesla K40    3.5<br>Tesla K20    3.5<br>Tesla K10    3.0</p>
<hr>
<h2 id="CUDA-Enabled-Quadro-Products"><a href="#CUDA-Enabled-Quadro-Products" class="headerlink" title="CUDA-Enabled Quadro Products"></a>CUDA-Enabled Quadro Products</h2><p>Quadro Desktop Products<br>GPU    Compute Capability<br>Quadro P6000    6.1<br>Quadro P5000    6.1<br>Quadro M6000 24GB    5.2<br>Quadro M6000    5.2<br>Quadro K6000    3.5<br>Quadro M5000    5.2<br>Quadro K5200    3.5<br>Quadro K5000    3.0<br>Quadro M4000    5.2<br>Quadro K4200    3.0<br>Quadro K4000    3.0<br>Quadro M2000    5.2<br>Quadro K2200    5.0<br>Quadro K2000    3.0<br>Quadro K2000D    3.0<br>Quadro K1200    5.0<br>Quadro K620    5.0<br>Quadro K600    3.0<br>Quadro K420    3.0<br>Quadro 410    3.0<br>Quadro Plex 7000    2.0<br>//////////////////////////////////////////////////////////////////<br>Quadro Mobile Products<br>GPU    Compute Capability<br>Quadro K6000M    3.0<br>Quadro M5500M    5.0<br>Quadro K5200M    3.0<br>Quadro K5100M    3.0<br>Quadro M5000M    5.0<br>Quadro K500M    3.0<br>Quadro K4200M    3.0<br>Quadro K4100M    3.0<br>Quadro M4000M    5.0<br>Quadro K3100M    3.0<br>Quadro M3000M    5.0<br>Quadro K2200M    5.0<br>Quadro K2100M    3.0<br>Quadro M2000M    5.0<br>Quadro K1100M    3.0<br>Quadro M1000M    5.0<br>Quadro K620M    5.0<br>Quadro K610M    3.5<br>Quadro M600M    5.0<br>Quadro K510M    3.5<br>Quadro M500M    5.0</p>
<hr>
<h2 id="CUDA-Enabled-NVS-Products"><a href="#CUDA-Enabled-NVS-Products" class="headerlink" title="CUDA-Enabled NVS Products"></a>CUDA-Enabled NVS Products</h2><p>Desktop Products<br>GPU    Compute Capability<br>NVIDIA NVS 810    5.0<br>NVIDIA NVS 510    3.0<br>NVIDIA NVS 315    2.1<br>NVIDIA NVS 310    2.1<br>//////////////////////////////////////////////////////////////////<br>Mobile Products<br>GPU    Compute Capability<br>NVS 5400M    2.1<br>NVS 5200M    2.1<br>NVS 4200M    2.1</p>
<hr>
<h2 id="CUDA-Enabled-GeForce-Products"><a href="#CUDA-Enabled-GeForce-Products" class="headerlink" title="CUDA-Enabled GeForce Products"></a>CUDA-Enabled GeForce Products</h2><p>GeForce Desktop Products<br>GPU    Compute Capability<br>NVIDIA TITAN X    6.1<br>GeForce GTX 1080    6.1<br>GeForce GTX 1070    6.1<br>GeForce GTX 1060    6.1<br>GeForce GTX TITAN X    5.2<br>GeForce GTX TITAN Z    3.5<br>GeForce GTX TITAN Black    3.5<br>GeForce GTX TITAN    3.5<br>GeForce GTX 980 Ti    5.2<br>GeForce GTX 980    5.2<br>GeForce GTX 970    5.2<br>GeForce GTX 960    5.2<br>GeForce GTX 950    5.2<br>GeForce GTX 780 Ti    3.5<br>GeForce GTX 780    3.5<br>GeForce GTX 770    3.0<br>GeForce GTX 760    3.0<br>GeForce GTX 750 Ti    5.0<br>GeForce GTX 750    5.0<br>GeForce GTX 690    3.0<br>GeForce GTX 680    3.0<br>GeForce GTX 670    3.0<br>GeForce GTX 660 Ti    3.0<br>GeForce GTX 660    3.0<br>GeForce GTX 650 Ti BOOST    3.0<br>GeForce GTX 650 Ti    3.0<br>GeForce GTX 650    3.0<br>GeForce GTX 560 Ti    2.1<br>GeForce GTX 550 Ti    2.1<br>GeForce GTX 460    2.1<br>GeForce GTS 450    2.1<br>GeForce GTS 450<em>    2.1<br>GeForce GTX 590    2.0<br>GeForce GTX 580    2.0<br>GeForce GTX 570    2.0<br>GeForce GTX 480    2.0<br>GeForce GTX 470    2.0<br>GeForce GTX 465    2.0<br>GeForce GT 740    3.0<br>GeForce GT 730    3.5<br>GeForce GT 730 DDR3,128bit    2.1<br>GeForce GT 720    3.5<br>GeForce GT 705</em>    3.5<br>GeForce GT 640 (GDDR5)    3.5<br>GeForce GT 640 (GDDR3)    2.1<br>GeForce GT 630    2.1<br>GeForce GT 620    2.1<br>GeForce GT 610    2.1<br>GeForce GT 520    2.1<br>GeForce GT 440    2.1<br>GeForce GT 440<em>    2.1<br>GeForce GT 430    2.1<br>GeForce GT 430</em>    2.1</p>
<hr>
<h2 id="CUDA-Enabled-TEGRA-Jetson-Products"><a href="#CUDA-Enabled-TEGRA-Jetson-Products" class="headerlink" title="CUDA-Enabled TEGRA /Jetson Products"></a>CUDA-Enabled TEGRA /Jetson Products</h2><p>GeForce Notebook Products<br>GPU    Compute Capability<br>GeForce GTX 1080    6.1<br>GeForce GTX 1070    6.1<br>GeForce GTX 1060    6.1<br>GeForce GTX 980    5.2<br>GeForce GTX 980M    5.2<br>GeForce GTX 970M    5.2<br>GeForce GTX 965M    5.2<br>GeForce GTX 960M    5.0<br>GeForce GTX 950M    5.0<br>GeForce 940M    5.0<br>GeForce 930M    5.0<br>GeForce 920M    3.5<br>GeForce 910M    5.2<br>GeForce GTX 880M    3.0<br>GeForce GTX 870M    3.0<br>GeForce GTX 860M    3.0/5.0(**)<br>GeForce GTX 850M    5.0<br>GeForce 840M    5.0<br>GeForce 830M    5.0<br>GeForce 820M    2.1<br>GeForce 800M    2.1<br>GeForce GTX 780M    3.0<br>GeForce GTX 770M    3.0<br>GeForce GTX 765M    3.0<br>GeForce GTX 760M    3.0<br>GeForce GTX 680MX    3.0<br>GeForce GTX 680M    3.0<br>GeForce GTX 675MX    3.0<br>GeForce GTX 675M    2.1<br>GeForce GTX 670MX    3.0<br>GeForce GTX 670M    2.1<br>GeForce GTX 660M    3.0<br>GeForce GT 750M    3.0<br>GeForce GT 650M    3.0<br>GeForce GT 745M    3.0<br>GeForce GT 645M    3.0<br>GeForce GT 740M    3.0<br>GeForce GT 730M    3.0<br>GeForce GT 640M    3.0<br>GeForce GT 640M LE    3.0<br>GeForce GT 735M    3.0<br>GeForce GT 635M    2.1<br>GeForce GT 730M    3.0<br>GeForce GT 630M    2.1<br>GeForce GT 625M    2.1<br>GeForce GT 720M    2.1<br>GeForce GT 620M    2.1<br>GeForce 710M    2.1<br>GeForce 705M    2.1<br>GeForce 610M    2.1<br>GeForce GTX 580M    2.1<br>GeForce GTX 570M    2.1<br>GeForce GTX 560M    2.1<br>GeForce GT 555M    2.1<br>GeForce GT 550M    2.1<br>GeForce GT 540M    2.1<br>GeForce GT 525M    2.1<br>GeForce GT 520MX    2.1<br>GeForce GT 520M    2.1<br>GeForce GTX 485M    2.1<br>GeForce GTX 470M    2.1<br>GeForce GTX 460M    2.1<br>GeForce GT 445M    2.1<br>GeForce GT 435M    2.1<br>GeForce GT 420M    2.1<br>GeForce GT 415M    2.1<br>GeForce GTX 480M    2.0<br>GeForce 710M    2.1<br>GeForce 410M    2.1</p>
<hr>
<h2 id="Tegra-Mobile-amp-Jetson-Products"><a href="#Tegra-Mobile-amp-Jetson-Products" class="headerlink" title="Tegra Mobile &amp; Jetson Products"></a>Tegra Mobile &amp; Jetson Products</h2><p>Tegra Mobile &amp; Jetson Products<br>GPU    Compute Capability<br>Jetson TX1    5.3<br>Jetson TK1    3.2<br>Tegra X1    5.3<br>Tegra K1    3.2</p>
<p>Notes<br>(*) OEM-only products</p>
<p>(**) The GeForce GTX860 and GTX870 come in two versions depending on the SKU, please check with your OEM to determine which one is in your system.</p>
<p>1152 Kepler Cores with Compute Capability 3.0<br>640 Maxwell Cores with higher clocks and Compute Capability 5.0 or 5.2</p>
<p>Frequently Asked Questions<br>1) How can I find out which GPU is in my computer?<br>Answer:<br>On Windows computers:</p>
<p>Right-click on desktop<br>If you see “NVIDIA Control Panel” or “NVIDIA Display” in the pop-up window, you have an NVIDIA GPU<br>Click on “NVIDIA Control Panel” or “NVIDIA Display” in the pop-up window<br>Look at “Graphics Card Information”<br>You will see the name of your NVIDIA GPU<br>On Apple computers:</p>
<p>Click on “Apple Menu”<br>Click on “About this Mac”<br>Click on “More Info”<br>Select “Graphics/Displays” under Contents list<br>2) Do I have a CUDA-enabled GPU in my computer?<br>Answer: Check the list above to see if your GPU is on it. If it is, it means your computer has a modern GPU that can take advantage of CUDA-accelerated applications.<br>3) How do I know if I have the latest drivers?<br>Answer: Go to www.nvidia.com/drivers<br>4) How can I obtain a CUDA-enabled GPU or system?<br>Answer:<br>For Tesla for HPC and supercomputing applications, go to www.nvidia.com/object/tesla_wtb.html<br>For GeForce for entertainment, go to www.nvidia.com/object/geforce_family.html<br>For Quadro for professional visualization, go to www.nvidia.com/object/workstation_wheretobuy.html<br>5) How can I download the CUDA software development kit?<br>Answer: Go to CUDA Development Tools.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/29/NVIDIA-GPU-运算能力列表/" data-id="cjanl0a6k00094owgw7b0yg0u" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CUDA-GPUs/">CUDA GPUs</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Tensorflow问题集锦" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/29/Tensorflow问题集锦/" class="article-date">
  <time datetime="2017-11-29T07:21:55.000Z" itemprop="datePublished">2017-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>►<a class="article-category-link" href="/categories/机器学习/Tensorflow/">Tensorflow</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/29/Tensorflow问题集锦/">Tensorflow问题集锦</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="Tensorflow问题集锦"><a href="#Tensorflow问题集锦" class="headerlink" title="Tensorflow问题集锦"></a>Tensorflow问题集锦</h1><h2 id="couldn’t-open-CUDA-library-cupti64-80-dll"><a href="#couldn’t-open-CUDA-library-cupti64-80-dll" class="headerlink" title="couldn’t open CUDA library cupti64_80.dll"></a>couldn’t open CUDA library cupti64_80.dll</h2><p>问题一般出现在：Win10 TensorFlow（gpu）安装过程</p>
<p><strong>原因：</strong>在资源管理器中查询 cupti64_80.dll 的位置。如对于 windows 用户而言，如果将 nvidia 的显卡驱动安装在默认位置，该 dll 文件的路径在：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">C:\<span class="title">Program</span> <span class="title">Files</span>\<span class="title">NVIDIA</span> <span class="title">GPU</span> <span class="title">Computing</span> <span class="title">Toolkit</span>\<span class="title">CUDA</span>\<span class="title">v8</span>.0\<span class="title">extras</span>\<span class="title">CUPTI</span>\<span class="title">libx64</span></span></div></pre></td></tr></table></figure>
<p>一种简单直接的方法即是不放将该路径下的文件全部复制到：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">C:\<span class="title">Program</span> <span class="title">Files</span>\<span class="title">NVIDIA</span> <span class="title">GPU</span> <span class="title">Computing</span> <span class="title">Toolkit</span>\<span class="title">CUDA</span>\<span class="title">v8</span>.0\<span class="title">bin</span></span></div></pre></td></tr></table></figure>
<p>bin 目录下。</p>
<h2 id="TensorFlow-InternalError-Blas-SGEMM-launch-failed"><a href="#TensorFlow-InternalError-Blas-SGEMM-launch-failed" class="headerlink" title="TensorFlow: InternalError: Blas SGEMM launch failed"></a>TensorFlow: InternalError: Blas SGEMM launch failed</h2><p>此问题会出现在执行 tf.matmul(a, b) 时，出现此问题的原因在于此时应当在多个应用程序中运行着其他的 Interactive Session，将它们关闭就好了。</p>
<p>或者在运行出异常的程序之前，添加如下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="string">'session'</span> <span class="keyword">in</span> locals() <span class="keyword">and</span> session <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</div><div class="line">    print(<span class="string">'Close interactive session'</span>)</div><div class="line">    session.close()</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/29/Tensorflow问题集锦/" data-id="cjanl0a70000n4owg03sihnbe" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tensorflow/">Tensorflow</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Tensorboard-实例" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/Tensorboard-实例/" class="article-date">
  <time datetime="2017-11-28T02:47:27.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>►<a class="article-category-link" href="/categories/机器学习/Tensorflow/">Tensorflow</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/28/Tensorboard-实例/">Tensorboard 实例</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="Tensorboard-实例"><a href="#Tensorboard-实例" class="headerlink" title="Tensorboard 实例"></a>Tensorboard 实例</h1><h2 id="构建数据流图"><a href="#构建数据流图" class="headerlink" title="构建数据流图"></a>构建数据流图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"></div><div class="line">graph = tf.Graph()</div><div class="line"></div><div class="line"><span class="keyword">with</span> graph.as_default():</div><div class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">"variables"</span>):</div><div class="line">        <span class="comment"># 记录数据流图运行次数的 Variable 对象</span></div><div class="line">        global_step = tf.Variable(<span class="number">0</span>, dtype=tf.int32, trainable=<span class="keyword">False</span>, name=<span class="string">"global_step"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># 追踪该模型的所有输出随时间的累加和的 Variable 对象</span></div><div class="line">        total_output = tf.Variable(<span class="number">0.0</span>, dtype=tf.float32, trainable=<span class="keyword">False</span>, name=<span class="string">"total_output"</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">"transformation"</span>):</div><div class="line">        <span class="comment"># 独立的输入层</span></div><div class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">"input"</span>):</div><div class="line">            <span class="comment"># 创建输出占用符， 用于接收一个向量</span></div><div class="line">            a = tf.placeholder(tf.float32, shape=[<span class="keyword">None</span>], name=<span class="string">"input_placeholder_a"</span>)</div><div class="line">        </div><div class="line">        <span class="comment"># 独立的中间层</span></div><div class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">"intermediate_layer"</span>):</div><div class="line">            b = tf.reduce_prod(a, name=<span class="string">"product_b"</span>)</div><div class="line">            c = tf.reduce_sum(a, name=<span class="string">"sum_c"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># 独立的输出层</span></div><div class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">"output"</span>):</div><div class="line">            output = tf.add(b, c, name=<span class="string">"output"</span>)</div><div class="line"></div><div class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">"update"</span>):</div><div class="line">        <span class="comment"># 用最新的输出更新 Variable 对象 total_output</span></div><div class="line">        update_total = total_output.assign_add(output)</div><div class="line">        <span class="comment"># 将前面的 Variable 对象 global_step 曾1，只要数据流图运行，该操作需要进行</span></div><div class="line">        increment_step = global_step.assign_add(<span class="number">1</span>)</div><div class="line"></div><div class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">"summaries"</span>):</div><div class="line">        avg = tf.div(update_total, tf.cast(increment_step, tf.float32), name=<span class="string">"average"</span>)</div><div class="line"></div><div class="line">        <span class="comment"># 为输出节点创建汇总数据</span></div><div class="line">        tf.summary.scalar(<span class="string">'output_summary'</span>, output)</div><div class="line">        tf.summary.scalar(<span class="string">'total_summary'</span>, update_total)</div><div class="line">        tf.summary.scalar(<span class="string">'average_summary'</span>, avg)</div><div class="line"></div><div class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">"global_ops"</span>):</div><div class="line">        <span class="comment"># 初始化Op</span></div><div class="line">        init = tf.initialize_all_variables()</div><div class="line">        <span class="comment"># 将所有汇总数据合并到一个Op中</span></div><div class="line">        merged_summaries = tf.summary.merge_all()</div></pre></td></tr></table></figure>
<h2 id="运行数据流图"><a href="#运行数据流图" class="headerlink" title="运行数据流图"></a>运行数据流图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 用明确定义的 Graph 对象启动一个会话</span></div><div class="line">sess = tf.Session(graph=graph)</div><div class="line"></div><div class="line"><span class="comment"># 开启一个 summary.FileWriter 对象， 保存汇总数据</span></div><div class="line">writer = tf.summary.FileWriter(<span class="string">'./improved_graph'</span>, graph)</div><div class="line"></div><div class="line"><span class="comment"># 初始化 Variable 对象</span></div><div class="line">sess.run(init)</div><div class="line"></div><div class="line"><span class="comment"># 为方便代码复用，定义辅助函数 run_graph()</span></div><div class="line"><span class="comment"># 用以输入张量以运行数据流图，并保存汇总数据</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_graph</span><span class="params">(input_tensor)</span>:</span></div><div class="line">    feed_dict = &#123;a: input_tensor&#125;</div><div class="line">    _, step, summary = sess.run([output, increment_step, merged_summaries], feed_dict=feed_dict)</div><div class="line">    writer.add_summary(summary, global_step=step)</div><div class="line"></div><div class="line"><span class="comment"># 用不同的输入运行该数据流图</span></div><div class="line">run_graph([<span class="number">2</span>, <span class="number">8</span>])</div><div class="line">run_graph([<span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>])</div><div class="line">run_graph([<span class="number">8</span>])</div><div class="line">run_graph([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line">run_graph([<span class="number">11</span>, <span class="number">4</span>])</div><div class="line">run_graph([<span class="number">4</span>, <span class="number">1</span>])</div><div class="line">run_graph([<span class="number">7</span>, <span class="number">3</span>, <span class="number">1</span>])</div><div class="line">run_graph([<span class="number">6</span>, <span class="number">3</span>])</div><div class="line">run_graph([<span class="number">0</span>, <span class="number">2</span>])</div><div class="line">run_graph([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</div><div class="line"></div><div class="line"><span class="comment"># 将汇总数据写入磁盘</span></div><div class="line">writer.flush()</div><div class="line"></div><div class="line"><span class="comment"># 关闭 summary.FileWriter 对象</span></div><div class="line">writer.close()</div><div class="line"></div><div class="line"><span class="comment"># 关闭 Session 对象</span></div><div class="line">sess.close()</div></pre></td></tr></table></figure>
<h2 id="TensorBoard-Graph-效果："><a href="#TensorBoard-Graph-效果：" class="headerlink" title="TensorBoard Graph 效果："></a>TensorBoard Graph 效果：</h2><p><img src="/2017/11/28/Tensorboard-实例/pic1.PNG" alt=""></p>
<h2 id="scalar-将显示汇总-summaries："><a href="#scalar-将显示汇总-summaries：" class="headerlink" title="scalar 将显示汇总 summaries："></a>scalar 将显示汇总 summaries：</h2><p><img src="/2017/11/28/Tensorboard-实例/pic2.PNG" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/28/Tensorboard-实例/" data-id="cjanl0a70000d4owg2tk0omxa" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tensorflow/">Tensorflow</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-TensorFlow学习——TensorFlow-Core" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/27/TensorFlow学习——TensorFlow-Core/" class="article-date">
  <time datetime="2017-11-27T11:17:04.000Z" itemprop="datePublished">2017-11-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>►<a class="article-category-link" href="/categories/机器学习/Tensorflow/">Tensorflow</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/27/TensorFlow学习——TensorFlow-Core/">TensorFlow学习——TensorFlow Core</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="Tensorflow-core"><a href="#Tensorflow-core" class="headerlink" title="Tensorflow core"></a>Tensorflow core</h1><h2 id="tf-train-API"><a href="#tf-train-API" class="headerlink" title="tf.train API"></a>tf.train API</h2><ul>
<li>optimizers —— 优化器</li>
</ul>
<p>TensorFlow 提供了<strong>优化器</strong>来缓慢地更改每个变量，从而最大程度的降低损耗函数。<br>eg. gradient descent:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">optimizer = tf.train.GradientDescentOptimizer(0.01)</div><div class="line">train = optimizer.minimize(loss)</div></pre></td></tr></table></figure>
<p>训练线性回归模型完整的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 导入tensorflow</span></div><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"></div><div class="line"><span class="comment"># 模型参数</span></div><div class="line">W = tf.Variable([<span class="number">.3</span>], dtype=tf.float32)</div><div class="line">b = tf.Variable([<span class="number">-.3</span>], dtype=tf.float32)</div><div class="line"><span class="comment"># 模型输入和输出</span></div><div class="line">x = tf.placeholder(tf.float32)</div><div class="line"><span class="comment"># 定义线性模型</span></div><div class="line">linear_model = W*x + b</div><div class="line">y = tf.placeholder(tf.float32)</div><div class="line"></div><div class="line"><span class="comment"># 损耗</span></div><div class="line">loss = tf.reduce_sum(tf.square(linear_model - y)) <span class="comment"># sum of the squares</span></div><div class="line"><span class="comment"># 优化器：梯度下降</span></div><div class="line">optimizer = tf.train.GradientDescentOptimizer(<span class="number">0.01</span>)</div><div class="line">train = optimizer.minimize(loss)</div><div class="line"></div><div class="line"><span class="comment"># 训练集数据</span></div><div class="line">x_train = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line">y_train = [<span class="number">0</span>, <span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-3</span>]</div><div class="line"><span class="comment"># 训练循环</span></div><div class="line">init = tf.global_variables_initializer()</div><div class="line">sess = tf.Session()</div><div class="line">sess.run(init) <span class="comment"># reset values to wrong</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>):</div><div class="line">  sess.run(train, &#123;x: x_train, y: y_train&#125;)</div><div class="line"></div><div class="line"><span class="comment"># 计算训练的准确度</span></div><div class="line">curr_W, curr_b, curr_loss = sess.run([W, b, loss], &#123;x: x_train, y: y_train&#125;)</div><div class="line">print(<span class="string">"W: %s b: %s loss: %s"</span>%(curr_W, curr_b, curr_loss))</div></pre></td></tr></table></figure>
<h2 id="tf-estimator"><a href="#tf-estimator" class="headerlink" title="tf.estimator"></a>tf.estimator</h2><p>tf.estimator 作为 TensorFlow 高级库，简化了机器学习的机制，其中包括：</p>
<ul>
<li>运行训练循环</li>
<li>运行评估循环</li>
<li>管理数据集</li>
</ul>
<p>tf.estimator 定义了徐福哦常见的模型</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/27/TensorFlow学习——TensorFlow-Core/" data-id="cjanl0a70000f4owgdcigkdh6" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tensorflow/">Tensorflow</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-小白科普：分布式和集群" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/27/小白科普：分布式和集群/" class="article-date">
  <time datetime="2017-11-27T04:04:16.841Z" itemprop="datePublished">2017-11-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/架构-设计/">架构&设计</a>►<a class="article-category-link" href="/categories/架构-设计/经典文摘/">经典文摘</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/27/小白科普：分布式和集群/">小白科普：分布式和集群</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="小白科普：分布式和集群"><a href="#小白科普：分布式和集群" class="headerlink" title="小白科普：分布式和集群"></a>小白科普：分布式和集群</h1><p> | 来自：码农翻身（微信号：coderising）</p>
<h2 id="1-分布式"><a href="#1-分布式" class="headerlink" title="1 分布式"></a>1 分布式</h2><p>小明的公司有3个系统： 系统 A、系统 B 和系统 C，这三个系统所做的业务不同，被部署在3个独立的机器上运行， 他们之间互相调用（当然是跨域网络的）， 通力合作完成公司的业务流程。</p>
<p><img src="/2017/11/27/小白科普：分布式和集群/pic1.jpg" alt="image"></p>
<p>将不同的业务分布在不同的地方， 这就构成了一个<strong>分布式</strong>的系统，现在问题来了， 系统A是整个分布式系统的“脸面”， 用户直接访问，用户量访问大的时候要么是速度巨慢，要么直接挂掉， 怎么办？</p>
<p>由于系统A只有一份， 所以会引起<strong>单点失败</strong>。</p>
<h2 id="2-集群（Cluster）"><a href="#2-集群（Cluster）" class="headerlink" title="2 集群（Cluster）"></a>2 集群（Cluster）</h2><p>小明的公司不差钱，就多买几台机器吧， 小明把系统A一下子部署了好几份（例如下图的3个服务器），<strong>每一份都是系统A的一个实例， 对外提供同样的服务，</strong>这样能睡个安稳觉了，不怕其中一个坏掉了，我还有另外两个呢。</p>
<p>这3个服务器上的系统就组成了一个集群。</p>
<p><img src="/2017/11/27/小白科普：分布式和集群/pic2.jpg" alt="image"></p>
<p>可是对用户来说，一下子出现这么系统A ，每个系统的IP地址都不一样，  到底访问哪一个？</p>
<p>如果所有人都访问服务器1.1 ，那服务器1.1 会被累死， 剩下的三个闲死，成了浪费钱的摆设。</p>
<h2 id="3-负载均衡（Load-Balancer）"><a href="#3-负载均衡（Load-Balancer）" class="headerlink" title="3 负载均衡（Load Balancer）"></a>3 负载均衡（Load Balancer）</h2><p>小明要尽可能的让3个机器上的系统A 工作均衡一些， 比如有3万个请求，那就让3个服务器各处理1万个（当然，这是理想状况）， 这叫<strong>负载均衡</strong>。</p>
<p>很明显，这个负载均衡的工作最好独立出来， 放到独立的服务器上 （例如Ngnix）：</p>
<p><img src="/2017/11/27/小白科普：分布式和集群/pic3.jpg" alt="image"></p>
<p>后来小明发现， 这个<strong>负载均衡</strong>的服务器虽然工作内容很简单，就是拿到请求，分发请求，但是它还是有可能挂掉啊， <strong>单点失败</strong>还是会出现。</p>
<p>没办法，只好把<strong>负载均衡</strong>也搞成一个<strong>集群</strong>， 不过和系统A的集群有两点不同：</p>
<ul>
<li>这个新的集群中虽然有两个机器，但我们可以用某种办法，让这个集群对外只提供一个IP地址， 也就是说<strong>用户看到的好像只有一个机器</strong>。</li>
<li><strong>同一时刻，我们只让一个负载均衡的机器工作， 另外一个原地待命</strong>。 如果工作的那个挂掉了，待命的那个就顶上去。</li>
</ul>
<p><img src="/2017/11/27/小白科普：分布式和集群/pic4.jpg" alt="image"></p>
<h2 id="4-弹性"><a href="#4-弹性" class="headerlink" title="4 弹性"></a>4 弹性</h2><p>如果这3个系统A的实例还是满足不了大量的请求，那就再加服务器！</p>
<p>双11来了，用户量是平时的10倍， 小明向领导申请费用又买了几十台服务器，一下子把系统A部署了几十份。  可是双11过后， 流量一下子降下来了，那几十个服务器用不上了，也变成了摆设！</p>
<p>被领导批评以后，小明决定尝试一下云计算，  在云端可以轻松的创建、删除虚拟的服务器， 那样就可以轻松地随着用户的请求动态的增减服务器了。  双11来了就创建虚拟服务器，等到双11过去了就把不用的关掉， 省得浪费钱。</p>
<p>于是小明的系统具备了一定的弹性。</p>
<h2 id="5-失效转移"><a href="#5-失效转移" class="headerlink" title="5 失效转移"></a>5 失效转移</h2><p>上面的系统看起来很美好，但是做了一个不切实际的假设： 所有的服务都是无状态的。 换句话说，假设用户的两次请求直接是没有关联的。</p>
<p>但是现实是，大部分服务都是有状态的， 例如购物车。</p>
<p>用户访问系统，在服务器1.1上创建了一个购物车，并向其中加入了几个商品， 然后 服务器1.1 挂掉了， 用户的后续访问就找不到服务器1.1了，这时候就要做失效转移，让另外几个服务器去接管、去处理用户的请求。</p>
<p>可是问题来了，在服务器1.2，1.3上有用户的购物车吗？  如果没有， 用户就会抱怨，我刚创建的购物车哪里去了？</p>
<p>还有更严重的，假设用户是在服务器1.1上登录的， 用户登录过的信息保存到了该服务器的 session 中， 现在这个服务器挂掉了， 用户的 session 自然也不见了，当用户被失效转移到其他服务器上的时候，其他服务器发现用户没有登录， 就把用户踢到了登录界面， 让用户再次登录！</p>
<p>状态，状态，状态！用户的登录信息，购物车等都是状态信息，  处理不好状态的问题，集群的威力就大打折扣，无法完成真正的失效转移， 甚至无法使用。</p>
<p>怎么办？</p>
<p>一种办法是把状态信息在集群的各个服务器之间复制，让集群的各个服务器达成一致，  谁来干这个事情？ 只能是像 Websphere, Weblogic 这样的应用服务器了。</p>
<p>还有一种办法， 就是把状态信息集中存储在一个地方， 让集群的各个服务器都能访问到：</p>
<p><img src="/2017/11/27/小白科普：分布式和集群/pic5.jpg" alt="image"></p>
<p>小明听说 Redis 不错， 那就用 Redis 来保存吧 ！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/27/小白科普：分布式和集群/" data-id="cjanl0a7g00134owgtfrpevsm" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分布式/">分布式</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/集群/">集群</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-Tensorflow学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/26/Tensorflow学习笔记/" class="article-date">
  <time datetime="2017-11-26T12:43:52.000Z" itemprop="datePublished">2017-11-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>►<a class="article-category-link" href="/categories/机器学习/Tensorflow/">Tensorflow</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/26/Tensorflow学习笔记/">Tensorflow学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h1><h2 id="Tensor-——-张量"><a href="#Tensor-——-张量" class="headerlink" title="Tensor —— 张量"></a>Tensor —— 张量</h2><p>TensorFlow 的核心数据单位就是<strong>张量</strong>。</p>
<ul>
<li>张量的定义：<strong>张量</strong>可看做是由原始值组成的任意维度数组。<strong>张量的阶</strong>就是它的维度。</li>
<li>张量的<strong>形状（shape）</strong>：这里形状是Tensorflow的专用术语，它同时刻画了张量的维（阶）和每一维的长度。</li>
</ul>
<h2 id="The-Computational-Graph-——-计算图"><a href="#The-Computational-Graph-——-计算图" class="headerlink" title="The Computational Graph —— 计算图"></a>The Computational Graph —— 计算图</h2><p><strong>计算图</strong>是一系列 TensorFlow 运算作为节点组成的节点图。</p>
<h2 id="Node-——-节点"><a href="#Node-——-节点" class="headerlink" title="Node —— 节点"></a>Node —— 节点</h2><h2 id="edge-——-边"><a href="#edge-——-边" class="headerlink" title="edge —— 边"></a>edge —— 边</h2><h2 id="placeholder-——-占位符"><a href="#placeholder-——-占位符" class="headerlink" title="placeholder —— 占位符"></a>placeholder —— 占位符</h2><p>为运算时即将到来的某个 Tensor 对象预留位置。placeholder的值无法计算，也就是说，如果试图将它传入Session.run()， 将引发错误。</p>
<h2 id="constant-——-常量"><a href="#constant-——-常量" class="headerlink" title="constant —— 常量"></a>constant —— 常量</h2><h2 id="Variable-——-变量"><a href="#Variable-——-变量" class="headerlink" title="Variable —— 变量"></a>Variable —— 变量</h2><ul>
<li><p>创建 Valiable 对象</p>
<p>  Tensor 对象和 Op 对象都是不可变的（immutable），而 Variable 被设计用来保存随时间变化的值。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 为 Variable 对象传入一个初始值3</span></div><div class="line">tf.Variable（<span class="number">3</span>，name=<span class="string">"my_variable"</span>）</div><div class="line"><span class="comment"># 2*2 的零矩阵</span></div><div class="line">tf.zeros([<span class="number">2</span>, <span class="number">2</span>])</div><div class="line"><span class="comment"># 2*2 的全1矩阵</span></div><div class="line">tf.ones([<span class="number">2</span>, <span class="number">2</span>])</div><div class="line"><span class="comment"># 3*3*3 的张量，其元素服从0~10的均匀分布</span></div><div class="line">tf.random_uniform([<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>], minval=<span class="number">0</span>, maxval=<span class="number">10</span>)</div><div class="line"><span class="comment"># 3*3*3 的张量，其元素服从0均值、标准差为2的正太分布</span></div><div class="line">tf.random_normal([<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>], mean=<span class="number">0.0</span>, stddev=<span class="number">2.0</span>)</div><div class="line"><span class="comment"># 为 Tensor 对象不会返回任何小于3.0或大于7.0的值</span></div><div class="line">tf.truncated_normal([<span class="number">2</span>, <span class="number">2</span>], mean=<span class="number">5.0</span>, stddev=<span class="number">1.0</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>初始化</p>
<ul>
<li>通常通过将 tf.initialize_all_variables() 操作传给 Session.run() 完成</li>
<li>使用 tf.initialize_variables() 初始化 Variable 对象的一个子集</li>
</ul>
</li>
<li><p>对象的修改</p>
<ul>
<li>Variable.assign() 操作重新赋值</li>
<li>Variable.assign_add() 和 Variable.assign_sub() 来实现 Variable 对象的简单的自增和自减</li>
</ul>
</li>
<li><p>trainable 参数</p>
</li>
</ul>
<p>对于迭代计数器或者其他不涉及机器学习模型计算的 Variable 对象，通常将设置 trainable 值为 False。</p>
<h2 id="Session-——-会话"><a href="#Session-——-会话" class="headerlink" title="Session —— 会话"></a>Session —— 会话</h2><p>Session 类负责数据流图的执行。其构造方法接收3个可选参数：</p>
<pre><code>1 target: 指定了所要使用的执行引擎。
2 graph：指定了将要在 Session 对象中加载的 Graph 对象，默认值为 None，表示使用默认的数据流图。
3 config：允许用户指定配置 Session 对象所需的选项。
</code></pre><p><strong>Session.run()</strong> 方法接收一个参数fethes，以及其他三个可选参数：feed_dict、options 和 run_metadata。<br>    1 fethes：接收任意的数据流图元素（Op 或 Tensor 对象【执行对象】）; 如为 Tensor 对象，则输出为 NumPy 数组， 如为 Op，则输出为 None。</p>
<pre><code>2 feed_dict：用于覆盖数据流图中的 Tensor 对象值
</code></pre><h2 id="Operation-——-操作"><a href="#Operation-——-操作" class="headerlink" title="Operation —— 操作"></a>Operation —— 操作</h2><h2 id="Graph-——-图"><a href="#Graph-——-图" class="headerlink" title="Graph —— 图"></a>Graph —— 图</h2><h2 id="name-scope-——-名称作用域"><a href="#name-scope-——-名称作用域" class="headerlink" title="name scope —— 名称作用域"></a>name scope —— 名称作用域</h2><ul>
<li><p>作用：组织数据流图，控制复杂度</p>
</li>
<li><p>用法：将 Op 添加到 with tf.name_scope(&lt; name &gt;) 语句块中</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"></div><div class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">"Scope_A"</span>):</div><div class="line">    a = tf.add(a, <span class="number">2</span>, name=<span class="string">"A_add"</span>)</div><div class="line">    b = tf.multiply(a, <span class="number">3</span>, name=<span class="string">"A_mul"</span>)</div><div class="line"></div><div class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">"Scope_B"</span>):</div><div class="line">    c = tf.add(<span class="number">4</span>, <span class="number">5</span>, name=<span class="string">"B_add"</span>)</div><div class="line">    d = tf.multiply(c, <span class="number">6</span>, name=<span class="string">"B_mul"</span>)</div><div class="line"></div><div class="line">e = tf.add(b, d, name=<span class="string">"output"</span>)</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/26/Tensorflow学习笔记/" data-id="cjanl0a70000j4owgzb4rwn70" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tensorflow/">Tensorflow</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-搭建你自己的Tensorflow环境" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/25/搭建你自己的Tensorflow环境/" class="article-date">
  <time datetime="2017-11-24T23:45:18.000Z" itemprop="datePublished">2017-11-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/机器学习/">机器学习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/25/搭建你自己的Tensorflow环境/">搭建Tensorflow环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h1 id="搭建Tensorflow环境"><a href="#搭建Tensorflow环境" class="headerlink" title="搭建Tensorflow环境"></a>搭建Tensorflow环境</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/25/搭建你自己的Tensorflow环境/" data-id="cjanl0a7g001b4owgucah33cy" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tensorflow/">tensorflow</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-nginx1-09-版本追加安装sticky1-25模块出现问题解决方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/21/nginx1-09-版本追加安装sticky1-25模块出现问题解决方法/" class="article-date">
  <time datetime="2017-11-21T07:15:10.000Z" itemprop="datePublished">2017-11-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务器技术/">服务器技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/21/nginx1-09-版本追加安装sticky1-25模块出现问题解决方法/">nginx1.9.0+版本追加安装sticky1.25模块出现问题解决方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="问题一："><a href="#问题一：" class="headerlink" title="问题一："></a>问题一：</h2><p>大致出现问题是因为MD5报错找不到：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ngx_http_sticky_misc.c: In function 「ngx_http_sticky_misc_md5」:</div><div class="line">ngx_http_sticky_misc.c:152:15: ERROR：「MD5_DIGEST_LENGTH」 undeclared (first use in this function)</div><div class="line">   u_char hash[MD5_DIGEST_LENGTH];</div></pre></td></tr></table></figure>
<p>解决方式:<br>    修改在你下载解压缩之后的sticky模块文件夹中的ngx_http_sticky_misc.c文件<br>将这两个模块 <openssl sha.h=""> and <openssl md5.h="">包含到文件ngx_http_sticky_misc.c<br>下面”+”标注de地方:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#include &lt;nginx.h&gt;</div><div class="line">#include &lt;ngx_config.h&gt;</div><div class="line">#include &lt;ngx_core.h&gt;</div><div class="line">#include &lt;ngx_http.h&gt;</div><div class="line">#include &lt;ngx_md5.h&gt;</div><div class="line">#include &lt;ngx_sha1.h&gt;</div><div class="line"></div><div class="line">+#include &lt;openssl/sha.h&gt;</div><div class="line">+#include &lt;openssl/md5.h&gt;</div><div class="line"></div><div class="line">#include &quot;ngx_http_sticky_misc.h&quot;</div></pre></td></tr></table></figure></openssl></openssl></p>
<h2 id="问题二："><a href="#问题二：" class="headerlink" title="问题二："></a>问题二：</h2><p>该问题大致是因为nginx1.9.0以上版本API的改变，<br>ngx_http_upstream_rr_peer_data_t 中类型定义从<br>ngx_uint_t 变为 ngx_http_upstream_rr_peer_t*，<br>导致sticky出现类型不匹配错误，提示如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/root/nginx-goodies-nginx-sticky-module-ng-1e96371de59f/ngx_http_sticky_module.c: In function ‘ngx_http_get_sticky_peer’: /tmp/nginx-goodies-nginx-sticky-module-ng-1e96371de59f/ngx_http_sticky_module.c:340:21: error: assignment makes pointer from integer without a cast [-Werror] iphp-&gt;rrp.current = iphp-&gt;selected_peer; ^ cc1: all warnings being treated as errors make[1]: [objs/addon/nginx-goodies-nginx-sticky-module-ng-1e96371de59f/ngx_http_sticky_module.o] Error 1 make[1]: Leaving directory `/tmp/nginx-1.9.0&apos; make: [build] Error 2</div></pre></td></tr></table></figure></p>
<p>解决方法：<br>        修改在你下载解压缩之后的sticky模块文件夹中的ngx_http_sticky_module.c文件，具体如下（“+”标注）：<br>添加头文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">+#include &lt;nginx.h&gt;</div><div class="line"> #include &lt;ngx_config.h&gt;</div><div class="line"> #include &lt;ngx_core.h&gt;</div><div class="line"> #include &lt;ngx_http.h&gt;</div><div class="line"> </div><div class="line"> #include &quot;ngx_http_sticky_misc.h&quot;</div></pre></td></tr></table></figure>
<p>修改code,大概在340行左右：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> 	/* we have a valid peer, tell the upstream module to use it */</div><div class="line"> 	if (peer &amp;&amp; selected_peer &gt;= 0) &#123;</div><div class="line"> 		ngx_log_debug(NGX_LOG_DEBUG_HTTP, pc-&gt;log, 0, &quot;[sticky/get_sticky_peer] peer found at index %i&quot;, selected_peer);</div><div class="line"> </div><div class="line">+#if defined(nginx_version) &amp;&amp; nginx_version &gt;= 1009000</div><div class="line">+		iphp-&gt;rrp.current = peer;</div><div class="line">+#else</div><div class="line"> 		iphp-&gt;rrp.current = iphp-&gt;selected_peer;</div><div class="line">+#endif		</div><div class="line">+		</div><div class="line"> 		pc-&gt;cached = 0;</div><div class="line"> 		pc-&gt;connection = NULL;</div><div class="line"> 		pc-&gt;sockaddr = peer-&gt;sockaddr;</div><div class="line"> 		pc-&gt;socklen = peer-&gt;socklen;</div><div class="line"> 		pc-&gt;name = &amp;peer-&gt;name;</div><div class="line"> </div><div class="line"> 		iphp-&gt;rrp.tried[n] |= m;</div><div class="line"> </div><div class="line"> 	&#125; else &#123;</div><div class="line"> 		ngx_log_debug(NGX_LOG_DEBUG_HTTP, pc-&gt;log, 0, &quot;[sticky/get_sticky_peer] no sticky peer selected, switch back to classic rr&quot;);</div><div class="line"> </div><div class="line"> 		if (iphp-&gt;no_fallback) &#123;</div><div class="line"> 			ngx_log_error(NGX_LOG_NOTICE, pc-&gt;log, 0, &quot;[sticky/get_sticky_peer] No fallback in action !&quot;);</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/21/nginx1-09-版本追加安装sticky1-25模块出现问题解决方法/" data-id="cjanl0a7g000u4owgc1yncdsw" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sticky/">Sticky</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/反向代理/">反向代理</a></li></ul>

    </footer>
  </div>
  
</article>
 


  
    <article id="post-装饰器Decorator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/07/装饰器Decorator/" class="article-date">
  <time datetime="2017-11-07T05:29:44.000Z" itemprop="datePublished">2017-11-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/07/装饰器Decorator/">Python学习——装饰器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>在学习Pthon过程中，装饰器算是一个蛮难理解的问题（对我来说，尤其是其效果看起来甚像Java中的AOP切面的织入）。</p>
<p>AOP采用的是Proxy模式，再利用反射机制。</p>
<p>Python中，<strong>函数</strong> 也是一个 </p>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a><strong>对象</strong></h2><p>要理解装饰器，首先必须知道，在python中，函数也是对象，而且函数对象可以被赋值给变量，所以，通过变量也能调用该函数。</p>
<p>让我们用一个sample example来理解：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">def shout():</div><div class="line">    print(&quot;Yes!&quot;)</div><div class="line">    </div><div class="line">shout()</div><div class="line"># outputs: &apos;Yes!&apos;</div><div class="line"></div><div class="line"># 作为对象，可以将函数赋值给另一个对象</div><div class="line">scream = shout</div><div class="line"></div><div class="line"># ！这里并没有使用括号：因为这里我们并不是调用函数，</div><div class="line"># 而是将函数‘shout’赋值给‘scream’ 这意味着，</div><div class="line"># 可以通过‘scream’ 调用 ‘shout’</div><div class="line"></div><div class="line">scream()</div><div class="line"># outputs: &apos;Yes!&apos;</div><div class="line"></div><div class="line"># 不仅如此，你甚至可以删除‘shout’，但是通过‘scream’依旧可以访问原有函数</div><div class="line"></div><div class="line">del shout</div><div class="line">try:</div><div class="line">    shout()</div><div class="line">except NameError, e:</div><div class="line">    print e</div><div class="line"># outputs: name &apos;shout&apos; is not defined</div><div class="line"></div><div class="line">scream()</div><div class="line"># outputs: &apos;Yes!&apos;</div></pre></td></tr></table></figure>
<p>装饰模式有很多经典的使用场景，例如：插入日志，性能测试，事务处理等等。有了装饰器，我们就可以提取大量函数中与函数本身功能无关的代码，从而达到代码重用的目的。</p>
<p><strong>一个简单的需求</strong><br>现在，假设我们要增强shout()函数的功能，在调用shout()函数前后自动打印日志，但是我们不希望修改函数。这种在代码运行期间动态增加功能的方式，称之为“装饰器”（Decorator）。</p>
<p>本质上，decorator就是一个返回函数的高阶函数。所以，我们要定义一个能打印日志的decorator，可以定义如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">def log(func): # 接受一个函数作为参数</div><div class="line">    def wrapper(*args, **kw): # wrapper()函数的参数定义是(*args, **kw)，因此，wrapper()函数可以接受任意参数的调用</div><div class="line">        print(&apos;start call %s(): &apos; % func.__name__)</div><div class="line">        func(*args, **kw)</div><div class="line">        print(&apos;end call %s(): &apos; % func.__name__)</div><div class="line">    return wrapper # 同时，返回一个参数</div></pre></td></tr></table></figure>
<p><strong>装饰器语法糖</strong></p>
<p>在Python中，可以使用“@”语法糖（把decorator置于函数定义处）来精简装饰器的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@log</div><div class="line">def shout():</div><div class="line">    print(&quot;Yes!&quot;)</div></pre></td></tr></table></figure>
<p>调用shout（）函数，不仅会运行shout（）函数本身，还会在运行函数shout前后各打印一行日志：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;shout()</div><div class="line">start call shout():</div><div class="line">Yes!</div><div class="line">end call shout():</div></pre></td></tr></table></figure></p>
<p>使用了“@”语法糖后，我们就不需要额外的代码来给“shout”重新赋值了，其实，@log的本质就是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shout=log（shout）</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yespon.github.io/2017/11/07/装饰器Decorator/" data-id="cjanl0a7g00184owgsftvfe2r" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/decorator/">decorator</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/装饰器/">装饰器</a></li></ul>

    </footer>
  </div>
  
</article>
 


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next&raquo;</a>
  </nav>
</section>
           
    <aside id="sidebar">
  
    
  <div class="widget-wrap">
     
        <h3 class="follow-title ">Follow me</h3>
     
    <div class="widget follow">
      
              <a class="github" aria-hidden="true" href="https://github.com/yespon" target="_blank" title="Github"></a>
      
      
            <a class="weibo" aria-hidden="true"  href="http://weibo.com/yespon" target="_blank" title="微博"></a>
      
      
              <a class="zhihu" aria-hidden="true"  href="http://www.zhihu.com/people/yespon" target="_blank" title="知乎"></a>
      
      
            <a class="email" aria-hidden="true"  href="mailto:yespon@qq.com" target="_blank" title="邮箱"></a>
      
    </div>
  </div>


  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title categories">Categories</h3>
    <div class="widget" id="categories">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Framework-Tools/">Framework&Tools</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器技术/">服务器技术</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/Tensorflow/">Tensorflow</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构-设计/">架构&设计</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/架构-设计/经典文摘/">经典文摘</a><span class="category-list-count">5</span></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title tagcloud">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CUDA-GPUs/" style="font-size: 14px; color: #00f">CUDA GPUs</a> <a href="/tags/LDAP/" style="font-size: 14px; color: #00f">LDAP</a> <a href="/tags/MQ/" style="font-size: 19.5px; color: #7741f7">MQ</a> <a href="/tags/Nginx/" style="font-size: 14px; color: #00f">Nginx</a> <a href="/tags/Sticky/" style="font-size: 14px; color: #00f">Sticky</a> <a href="/tags/Tensorflow/" style="font-size: 25px; color: #ee82ee">Tensorflow</a> <a href="/tags/UUID/" style="font-size: 14px; color: #00f">UUID</a> <a href="/tags/decorator/" style="font-size: 14px; color: #00f">decorator</a> <a href="/tags/pandas-read-csv/" style="font-size: 14px; color: #00f">pandas read_csv</a> <a href="/tags/quarts/" style="font-size: 14px; color: #00f">quarts</a> <a href="/tags/schedule/" style="font-size: 14px; color: #00f">schedule</a> <a href="/tags/tensorflow/" style="font-size: 14px; color: #00f">tensorflow</a> <a href="/tags/分布式/" style="font-size: 14px; color: #00f">分布式</a> <a href="/tags/反向代理/" style="font-size: 14px; color: #00f">反向代理</a> <a href="/tags/唯一性ID/" style="font-size: 14px; color: #00f">唯一性ID</a> <a href="/tags/消息中间件/" style="font-size: 19.5px; color: #7741f7">消息中间件</a> <a href="/tags/装饰器/" style="font-size: 14px; color: #00f">装饰器</a> <a href="/tags/集群/" style="font-size: 14px; color: #00f">集群</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/29/pandas-read-csv参数详解/">pandas.read_csv参数详解</a>
          </li>
        
          <li>
            <a href="/2017/11/29/NVIDIA-GPU-运算能力列表/">NVIDIA GPU 运算能力列表</a>
          </li>
        
          <li>
            <a href="/2017/11/29/Tensorflow问题集锦/">Tensorflow问题集锦</a>
          </li>
        
          <li>
            <a href="/2017/11/28/Tensorboard-实例/">Tensorboard 实例</a>
          </li>
        
          <li>
            <a href="/2017/11/27/TensorFlow学习——TensorFlow-Core/">TensorFlow学习——TensorFlow Core</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title archive">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


  
    
<div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">
        <ul>
            
            <li>
                <a href="http://yespon.github.io">yespon&#39;s blog</a>
            </li>
            
        </ul>
    </div>
</div>

  
    <!--微信公众号二维码-->

  <div class="widget-wrap">
    <h3 class="follow-title ">WeChat</h3>
    <div class="widget wechat-widget">
        <img src="/wechat_yespon.jpg" alt="扫码关注" width="250"/>
    </div>
  </div>


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2017 Yespon&nbsp;|&nbsp;
      Theme by <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      Contact&nbsp;|&nbsp;yespon#qq.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/" class="mobile-nav-link">Categories</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>